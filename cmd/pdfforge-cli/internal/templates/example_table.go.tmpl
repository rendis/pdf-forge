// Code generated by pdfforge-cli init for project "{{.ProjectName}}".
// pdf-forge: https://github.com/rendis/pdf-forge

package injectors

import (
	"context"
	"time"

	"github.com/rendis/pdf-forge/sdk"
)

// ExampleTableInjector demonstrates a TABLE type injectable.
type ExampleTableInjector struct{}

func (i *ExampleTableInjector) Code() string { return "my_example_table" }

func (i *ExampleTableInjector) Resolve() (sdk.ResolveFunc, []string) {
	return func(ctx context.Context, injCtx *sdk.InjectorContext) (*sdk.InjectorResult, error) {
		table := sdk.NewTableValue().
			AddColumn("item", map[string]string{"es": "Item", "en": "Item"}, sdk.ValueTypeString).
			AddColumn("description", map[string]string{"es": "Descripción", "en": "Description"}, sdk.ValueTypeString).
			AddColumn("value", map[string]string{"es": "Valor", "en": "Value"}, sdk.ValueTypeNumber).
			AddRow(
				sdk.Cell(sdk.StringValue("A")),
				sdk.Cell(sdk.StringValue("First example item")),
				sdk.Cell(sdk.NumberValue(100.00)),
			).
			AddRow(
				sdk.Cell(sdk.StringValue("B")),
				sdk.Cell(sdk.StringValue("Second example item")),
				sdk.Cell(sdk.NumberValue(200.00)),
			).
			AddRow(
				sdk.Cell(sdk.StringValue("C")),
				sdk.Cell(sdk.StringValue("Third example item")),
				sdk.Cell(sdk.NumberValue(300.00)),
			).
			WithHeaderStyles(sdk.TableStyles{
				Background: sdk.StringPtr("#f0f0f0"),
				FontWeight: sdk.StringPtr("bold"),
				TextAlign:  sdk.StringPtr("center"),
			})

		return &sdk.InjectorResult{Value: sdk.TableValueData(table)}, nil
	}, nil
}

func (i *ExampleTableInjector) IsCritical() bool                  { return false }
func (i *ExampleTableInjector) Timeout() time.Duration             { return 0 }
func (i *ExampleTableInjector) DataType() sdk.ValueType            { return sdk.ValueTypeTable }
func (i *ExampleTableInjector) DefaultValue() *sdk.InjectableValue { return nil }
func (i *ExampleTableInjector) Formats() *sdk.FormatConfig         { return nil }

// ColumnSchema implements sdk.TableSchemaProvider.
func (i *ExampleTableInjector) ColumnSchema() []sdk.TableColumn {
	return []sdk.TableColumn{
		{Key: "item", Labels: map[string]string{"es": "Item", "en": "Item"}, DataType: sdk.ValueTypeString},
		{Key: "description", Labels: map[string]string{"es": "Descripción", "en": "Description"}, DataType: sdk.ValueTypeString},
		{Key: "value", Labels: map[string]string{"es": "Valor", "en": "Value"}, DataType: sdk.ValueTypeNumber},
	}
}
