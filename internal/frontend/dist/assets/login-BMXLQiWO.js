import{u as N,f as g,r as a,j as e,L as y,l as k,g as A,h as T}from"./index-CTAJ0aU-.js";import{L as E,T as C}from"./ThemeToggle-BMEMMDmF.js";import{u as L}from"./dropdown-menu-DCI_DmMa.js";import{F as S}from"./file-text-CCmutUrO.js";import{C as F}from"./circle-alert-C4QUPNMw.js";import{A as I}from"./arrow-right-BeIQCfw9.js";import"./button-B-4Ev7VG.js";import"./i18n-BbL5dCUp.js";function G(){const{t}=L(),i=N(),{setTokens:p,setUserProfile:h,setAllRoles:b}=g(),u=g(s=>s.isAuthenticated()),[l,j]=a.useState(""),[d,v]=a.useState(""),[n,m]=a.useState(!1),[x,f]=a.useState(null);a.useEffect(()=>{u&&i({to:"/select-tenant",replace:!0})},[u,i]);const w=async s=>{s.preventDefault(),f(null),m(!0);try{const r=await k(l,d);p(r.access_token,r.refresh_token,r.expires_in);const o=await A();h({id:o.sub,email:o.email||"",firstName:o.given_name,lastName:o.family_name,username:o.preferred_username});try{const c=await T();b(c)}catch(c){console.warn("[Auth] Failed to fetch roles:",c)}i({to:"/select-tenant"})}catch(r){console.error("[Auth] Login failed:",r),f(r instanceof Error?r.message:t("login.error","Invalid username or password"))}finally{m(!1)}};return e.jsxs("div",{className:"relative flex min-h-screen flex-col justify-center overflow-hidden bg-background",children:[e.jsxs("div",{className:"absolute top-6 right-6 flex items-center gap-2",children:[e.jsx(E,{}),e.jsx(C,{})]}),e.jsxs("div",{className:"mx-auto flex h-full w-full max-w-7xl flex-col justify-center px-6 md:px-12 lg:px-32",children:[e.jsxs("div",{className:"mb-16 max-w-2xl md:mb-20",children:[e.jsxs("div",{className:"mb-10 flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center border-2 border-foreground text-foreground",children:e.jsx(S,{size:16})}),e.jsx("span",{className:"font-display text-lg font-bold uppercase tracking-tight text-foreground",children:"PDF Forge"})]}),e.jsxs("h1",{className:"font-display text-5xl font-light leading-[1.05] tracking-tight text-foreground md:text-6xl lg:text-7xl",children:[t("login.title","Login to"),e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:t("login.subtitle","your account.")})]})]}),e.jsx("div",{className:"w-full max-w-[400px]",children:e.jsxs("form",{className:"space-y-12",onSubmit:w,children:[x&&e.jsxs("div",{className:"flex items-center gap-3 rounded-md border border-destructive/50 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:[e.jsx(F,{size:18}),e.jsx("span",{children:x})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"mb-2 block font-mono text-xs font-medium uppercase tracking-widest text-muted-foreground transition-colors group-focus-within:text-foreground",children:t("login.email","Username / Email")}),e.jsx("input",{type:"text",value:l,onChange:s=>j(s.target.value),required:!0,disabled:n,autoComplete:"username",className:"w-full rounded-none border-0 border-b-2 border-border bg-transparent py-3 font-light text-xl text-foreground outline-none transition-all placeholder:text-muted focus-visible:border-foreground focus-visible:ring-0 disabled:opacity-50"})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"mb-2 block font-mono text-xs font-medium uppercase tracking-widest text-muted-foreground transition-colors group-focus-within:text-foreground",children:t("login.password","Password")}),e.jsx("input",{type:"password",value:d,onChange:s=>v(s.target.value),required:!0,disabled:n,autoComplete:"current-password",className:"w-full rounded-none border-0 border-b-2 border-border bg-transparent py-3 font-light text-xl text-foreground outline-none transition-all placeholder:text-muted focus-visible:border-foreground focus-visible:ring-0 disabled:opacity-50"})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-8 pt-4",children:[e.jsx("button",{type:"submit",disabled:n||!l||!d,className:"group flex h-14 w-full items-center justify-between gap-3 rounded-none bg-foreground px-8 text-sm font-medium tracking-wide text-background transition-colors hover:bg-foreground/90 disabled:cursor-not-allowed disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:t("login.authenticating","AUTHENTICATING...")}),e.jsx(y,{size:18,className:"animate-spin"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:t("login.authenticate","AUTHENTICATE")}),e.jsx(I,{size:18,className:"transition-transform group-hover:translate-x-1"})]})}),void 0]})]})}),e.jsx("div",{className:"absolute bottom-12 left-6 font-mono text-[10px] uppercase tracking-widest text-muted-foreground/50 md:left-12 lg:left-32",children:"v2.4 â€” Secure Environment"})]})]})}export{G as component};
