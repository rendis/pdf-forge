import{r as l,j as e,X as A,u as le,b as de,e as k,L as ke,T as _,n as K,o as X,B as ct,C as ut,M as mt,m as ee,A as xt,N as oe}from"./index-CabDCiKP.js";import{S as te}from"./skeleton-CDo8N60x.js";import{u as pt}from"./page-transition-store-DmUXMbmL.js";import{D as gt}from"./templates-api-B0ITYtMu.js";import{i as ft,j as ht,k as bt,l as jt,m as vt,a as Nt,b as yt,T as wt,u as Dt,g as kt,n as Ct,o as St,p as Tt,D as At,h as It}from"./DocumentTypeConflictDialog-DdOTwzUM.js";import{D as I,B as E,T as O,a as V,c as P,b as L}from"./dialog-BgnMq7mk.js";import{u as C}from"./dropdown-menu-D4aWCc6P.js";import{P as Ae,a as Et}from"./plus-CsZfHn5n.js";import{I as Vt,C as Ie,a as Pt,b as Lt,c as Ft,S as Ht,d as Rt}from"./send-JiXlEBAN.js";import{E as Ut,A as ae,C as Ee,T as Bt,F as zt}from"./trash-2-jdaO9wRj.js";import{C as ie}from"./clock-C3JW7cLz.js";import{A as Ot}from"./arrow-left-cQkoWLh2.js";import{F as $t}from"./folder-open-A9cAdEs5.js";import{L as Mt}from"./layers-DtjPGMXz.js";import{F as Ce}from"./file-text-C4dD9qJu.js";import"./useMutation-B1Hq6kwR.js";import"./search-DKEkv9b2.js";import"./useDocumentTypes-1KLN9A_F.js";import"./chevron-down-BznbGY0F.js";import"./index-yy5L4mSo.js";function Wt({open:t,onOpenChange:a,version:r,templateId:s}){const{t:n}=C(),[o,c]=l.useState(!1),d=ft(s),u=async()=>{if(!(!r||o)){c(!0);try{await d.mutateAsync(r.id),a(!1)}catch{}finally{c(!1)}}};return e.jsx(I,{open:t,onOpenChange:a,children:e.jsxs(E,{className:"max-w-md",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center bg-destructive/10",children:e.jsx(O,{className:"h-5 w-5 text-destructive"})}),e.jsx("div",{children:e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-foreground",children:n("templates.versionArchiveDialog.title","Archive Version")})})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(L,{className:"text-sm font-light text-muted-foreground",children:n("templates.versionArchiveDialog.message","Are you sure you want to archive version {{version}}? This action cannot be undone.",{version:(r==null?void 0:r.versionNumber)??""})})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),disabled:o,className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground disabled:opacity-50",children:n("common.cancel","Cancel")}),e.jsx("button",{type:"button",onClick:u,disabled:o,className:"rounded-none bg-destructive px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-destructive-foreground transition-colors hover:bg-destructive/90 disabled:opacity-50",children:o?n("common.archiving","Archiving..."):n("templates.versionArchiveDialog.confirm","Archive")})]})]})})}function _t({open:t,onOpenChange:a,version:r,templateId:s}){const{t:n}=C(),[o,c]=l.useState(!1),d=ht(s),u=async()=>{if(!(!r||o)){c(!0);try{await d.mutateAsync(r.id),a(!1)}catch{}finally{c(!1)}}};return e.jsx(I,{open:t,onOpenChange:a,children:e.jsxs(E,{className:"max-w-md",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center bg-destructive/10",children:e.jsx(O,{className:"h-5 w-5 text-destructive"})}),e.jsx("div",{children:e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-foreground",children:n("templates.versionCancelScheduleDialog.title","Cancel Scheduled Publication")})})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(L,{className:"text-sm font-light text-muted-foreground",children:n("templates.versionCancelScheduleDialog.message","Are you sure you want to cancel the scheduled publication of version {{version}}?",{version:(r==null?void 0:r.versionNumber)??""})})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),disabled:o,className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground disabled:opacity-50",children:n("common.cancel","Cancel")}),e.jsx("button",{type:"button",onClick:u,disabled:o,className:"rounded-none bg-destructive px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-destructive-foreground transition-colors hover:bg-destructive/90 disabled:opacity-50",children:o?n("common.cancelling","Cancelling..."):n("templates.versionCancelScheduleDialog.confirm","Cancel Schedule")})]})]})})}function Kt({open:t,onOpenChange:a,templateId:r,sourceVersion:s}){const{t:n}=C(),o=le(),{currentWorkspace:c}=de(),[d,u]=l.useState(""),[x,j]=l.useState(""),[f,v]=l.useState(!1),g=bt(r),w=l.useCallback(h=>{h&&(u(""),j(""),v(!1)),a(h)},[a]),m=async h=>{if(h.preventDefault(),!(!d.trim()||!c||!s||f)){v(!0);try{const G=await g.mutateAsync({sourceVersionId:s.id,name:d.trim(),description:x.trim()||void 0});a(!1),o({to:"/workspace/$workspaceId/editor/$templateId/version/$versionId",params:{workspaceId:c.id,templateId:r,versionId:G.id}})}catch{v(!1)}}};return s?e.jsx(I,{open:t,onOpenChange:w,children:e.jsxs(E,{className:"max-w-lg",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{children:[e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-foreground",children:n("templates.cloneVersionDialog.title","Clonar Versión")}),e.jsx(L,{className:"mt-1 text-sm font-light text-muted-foreground",children:n("templates.cloneVersionDialog.description","Crear una nueva versión a partir de {{versionName}}",{versionName:s.name})}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:n("templates.cloneVersionDialog.sourceVersion","Versión origen: v{{versionNumber}} - {{versionName}}",{versionNumber:s.versionNumber,versionName:s.name})})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clone-version-name",className:"mb-2 block font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:n("templates.createVersionDialog.nameLabel","Version Name")}),e.jsx("input",{id:"clone-version-name",type:"text",value:d,onChange:h=>u(h.target.value),placeholder:n("templates.createVersionDialog.namePlaceholder","e.g., Initial Draft, Review Changes..."),maxLength:100,autoFocus:!0,className:"w-full rounded-none border-0 border-b border-border bg-transparent py-2 text-base font-light text-foreground outline-none transition-all placeholder:text-muted-foreground/50 focus-visible:border-foreground focus-visible:ring-0"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"clone-version-description",className:"mb-2 block font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:[n("templates.createVersionDialog.descriptionLabel","Description"),e.jsxs("span",{className:"ml-2 normal-case tracking-normal text-muted-foreground/60",children:["(",n("common.optional","optional"),")"]})]}),e.jsx("textarea",{id:"clone-version-description",value:x,onChange:h=>j(h.target.value),placeholder:n("templates.createVersionDialog.descriptionPlaceholder","Optional description of changes..."),rows:3,className:"w-full resize-none rounded-none border-0 border-b border-border bg-transparent py-2 text-base font-light text-foreground outline-none transition-all placeholder:text-muted-foreground/50 focus-visible:border-foreground focus-visible:ring-0"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),disabled:f,className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground disabled:opacity-50",children:n("common.cancel","Cancel")}),e.jsx("button",{type:"submit",disabled:!d.trim()||f,className:"rounded-none bg-foreground px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-background transition-colors hover:bg-foreground/90 disabled:opacity-50",children:f?n("common.creating","Creando..."):n("templates.cloneVersionDialog.submit","Clonar Versión")})]})]})]})}):null}function Xt({open:t,onOpenChange:a,templateId:r}){const{t:s}=C(),n=le(),{currentWorkspace:o}=de(),[c,d]=l.useState(""),[u,x]=l.useState(""),[j,f]=l.useState(!1),v=jt(r),g=l.useCallback(m=>{m&&(d(""),x(""),f(!1)),a(m)},[a]),w=async m=>{if(m.preventDefault(),!(!c.trim()||!o||j)){f(!0);try{const h=await v.mutateAsync({name:c.trim(),description:u.trim()||void 0});a(!1),n({to:"/workspace/$workspaceId/editor/$templateId/version/$versionId",params:{workspaceId:o.id,templateId:r,versionId:h.id}})}catch{f(!1)}}};return e.jsx(I,{open:t,onOpenChange:g,children:e.jsxs(E,{className:"max-w-lg",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{children:[e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-foreground",children:s("templates.createVersionDialog.title","New Version")}),e.jsx(L,{className:"mt-1 text-sm font-light text-muted-foreground",children:s("templates.createVersionDialog.description","Create a new version of this template")})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"version-name",className:"mb-2 block font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:s("templates.createVersionDialog.nameLabel","Version Name")}),e.jsx("input",{id:"version-name",type:"text",value:c,onChange:m=>d(m.target.value),placeholder:s("templates.createVersionDialog.namePlaceholder","e.g., Initial Draft, Review Changes..."),maxLength:100,autoFocus:!0,className:"w-full rounded-none border-0 border-b border-border bg-transparent py-2 text-base font-light text-foreground outline-none transition-all placeholder:text-muted-foreground/50 focus-visible:border-foreground focus-visible:ring-0"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"version-description",className:"mb-2 block font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:[s("templates.createVersionDialog.descriptionLabel","Description"),e.jsxs("span",{className:"ml-2 normal-case tracking-normal text-muted-foreground/60",children:["(",s("common.optional","optional"),")"]})]}),e.jsx("textarea",{id:"version-description",value:u,onChange:m=>x(m.target.value),placeholder:s("templates.createVersionDialog.descriptionPlaceholder","Optional description of changes..."),rows:3,className:"w-full resize-none rounded-none border-0 border-b border-border bg-transparent py-2 text-base font-light text-foreground outline-none transition-all placeholder:text-muted-foreground/50 focus-visible:border-foreground focus-visible:ring-0"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),disabled:j,className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground disabled:opacity-50",children:s("common.cancel","Cancel")}),e.jsx("button",{type:"submit",disabled:!c.trim()||j,className:"rounded-none bg-foreground px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-background transition-colors hover:bg-foreground/90 disabled:opacity-50",children:j?s("common.creating","Creating..."):s("templates.createVersionDialog.submit","Create Version")})]})]})]})})}function Gt({open:t,onOpenChange:a,version:r,templateId:s}){const{t:n}=C(),[o,c]=l.useState(!1),d=vt(s),u=async()=>{if(!(!r||o)){c(!0);try{await d.mutateAsync(r.id),a(!1)}catch{}finally{c(!1)}}};return e.jsx(I,{open:t,onOpenChange:a,children:e.jsxs(E,{className:"max-w-md",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center bg-destructive/10",children:e.jsx(O,{className:"h-5 w-5 text-destructive"})}),e.jsx("div",{children:e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-foreground",children:n("templates.versionDeleteDialog.title","Delete Version")})})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(L,{className:"text-sm font-light text-muted-foreground",children:n("templates.versionDeleteDialog.message","Are you sure you want to delete version {{version}}? This action cannot be undone.",{version:(r==null?void 0:r.versionNumber)??""})})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),disabled:o,className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground disabled:opacity-50",children:n("common.cancel","Cancel")}),e.jsx("button",{type:"button",onClick:u,disabled:o,className:"rounded-none bg-destructive px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-destructive-foreground transition-colors hover:bg-destructive/90 disabled:opacity-50",children:o?n("common.deleting","Deleting..."):n("templates.versionDeleteDialog.confirm","Delete")})]})]})})}function Yt({value:t,onSave:a,isLoading:r=!1,className:s}){const[n,o]=l.useState(!1),[c,d]=l.useState(t),[u,x]=l.useState(!1),j=l.useRef(null);l.useEffect(()=>{!n&&!u&&d(t)},[t,n,u]),l.useEffect(()=>{n&&j.current&&(j.current.focus(),j.current.select())},[n]);const f=async()=>{const m=c.trim();if(!m||m===t){d(t),o(!1);return}x(!0),o(!1);try{await a(m)}catch{d(t)}finally{x(!1)}},v=m=>{m.key==="Enter"?(m.preventDefault(),f()):m.key==="Escape"&&(d(t),o(!1))},g=()=>{!r&&!u&&o(!0)},w=r||u;return n?e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx("input",{ref:j,value:c,onChange:m=>d(m.target.value),onBlur:f,onKeyDown:v,disabled:w,className:k("w-full bg-transparent border-b-2 border-primary outline-none","disabled:opacity-50",s)}),w&&e.jsx(ke,{className:"h-5 w-5 shrink-0 animate-spin text-muted-foreground"})]}):e.jsxs("div",{onClick:g,className:k("group relative flex w-full cursor-text items-center rounded px-2 py-1 -mx-2 -my-1","transition-all duration-150","hover:bg-muted/40",w&&"pointer-events-none"),children:[e.jsx("span",{className:k("min-w-0 flex-1 truncate",s),children:t}),w?e.jsx(ke,{className:"ml-3 h-5 w-5 shrink-0 animate-spin text-muted-foreground"}):e.jsx(Ae,{size:18,className:"ml-3 shrink-0 text-muted-foreground opacity-0 transition-opacity group-hover:opacity-60"})]})}function qt({open:t,onOpenChange:a,templateId:r,currentTags:s}){const{t:n}=C(),[o,c]=l.useState([]),[d,u]=l.useState(!1),x=Nt(),j=yt();l.useEffect(()=>{t&&(c(s.map(v=>v.id)),u(!1))},[t,s]);const f=async v=>{if(v.preventDefault(),!d){u(!0);try{const g=s.map(h=>h.id),w=o.filter(h=>!g.includes(h)),m=g.filter(h=>!o.includes(h));w.length>0&&await x.mutateAsync({templateId:r,tagIds:w});for(const h of m)await j.mutateAsync({templateId:r,tagId:h});a(!1)}catch{}finally{u(!1)}}};return e.jsx(I,{open:t,onOpenChange:a,children:e.jsxs(E,{className:"max-w-lg",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{children:[e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-foreground",children:n("templates.editTagsDialog.title","Edit Tags")}),e.jsx(L,{className:"mt-1 text-sm font-light text-muted-foreground",children:n("templates.editTagsDialog.description","Add or remove tags from this template")})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsxs("form",{onSubmit:f,children:[e.jsx("div",{className:"p-6",children:e.jsx(wt,{selectedTagIds:o,onSelectionChange:c})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),disabled:d,className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground disabled:opacity-50",children:n("common.cancel","Cancel")}),e.jsx("button",{type:"submit",disabled:d,className:"rounded-none bg-foreground px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-background transition-colors hover:bg-foreground/90 disabled:opacity-50",children:d?n("common.saving","Saving..."):n("templates.editTagsDialog.submit","Save Tags")})]})]})]})})}function Jt({open:t,onOpenChange:a,version:r,onConfirm:s,isLoading:n}){const{t:o}=C();return r?e.jsx(I,{open:t,onOpenChange:a,children:e.jsxs(E,{className:"max-w-md",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{children:[e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-foreground",children:o("templates.publishDialog.title","Publish Version")}),e.jsx(L,{className:"mt-1 text-sm font-light text-muted-foreground",children:o("templates.publishDialog.description",'Make version "{{name}}" live',{name:r.name})})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex gap-3 rounded-md border border-warning-border bg-warning-muted p-4",children:[e.jsx(O,{className:"h-5 w-5 shrink-0 text-warning"}),e.jsxs("div",{className:"text-sm text-warning-foreground",children:[e.jsx("p",{className:"font-medium",children:o("templates.publishDialog.warningTitle","This action will:")}),e.jsxs("ul",{className:"mt-2 list-inside list-disc space-y-1 opacity-80",children:[e.jsx("li",{children:o("templates.publishDialog.warning1","Replace the current published version")}),e.jsx("li",{children:o("templates.publishDialog.warning2","Make this content immediately available")})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),disabled:n,className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground disabled:opacity-50",children:o("common.cancel","Cancel")}),e.jsx("button",{type:"button",onClick:s,disabled:n,className:"rounded-none bg-foreground px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-background transition-colors hover:bg-foreground/90 disabled:opacity-50",children:n?o("common.publishing","Publishing..."):o("templates.publishDialog.confirm","Publish Now")})]})]})}):null}function Ve(){return new Date().toISOString().split("T")[0]}function Qt(t){const a=Ve();if(t===a){const r=new Date;return r.setMinutes(r.getMinutes()+5),r.toTimeString().slice(0,5)}return"00:00"}function Zt({open:t,onOpenChange:a,version:r,onConfirm:s,isLoading:n}){const{t:o}=C(),[c,d]=l.useState(""),[u,x]=l.useState(""),j=l.useCallback(g=>{a(g)},[a]),f=()=>{if(!c||!u)return;const g=new Date(`${c}T${u}`).toISOString();s(g),d(""),x("")},v=c&&u;return r?e.jsx(I,{open:t,onOpenChange:j,children:e.jsxs(E,{className:"max-w-md",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{children:[e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-foreground",children:o("templates.scheduleDialog.title","Schedule Publication")}),e.jsx(L,{className:"mt-1 text-sm font-light text-muted-foreground",children:o("templates.scheduleDialog.description",'Schedule when "{{name}}" will go live',{name:r.name})})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"publish-date",className:"mb-2 block font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:o("templates.scheduleDialog.dateLabel","Publish Date")}),e.jsx("input",{id:"publish-date",type:"date",value:c,onChange:g=>d(g.target.value),min:Ve(),className:"w-full rounded-none border-0 border-b border-border bg-transparent py-2 text-base font-light text-foreground outline-none transition-all focus-visible:border-foreground focus-visible:ring-0 dark:scheme-dark"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"publish-time",className:"mb-2 block font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:o("templates.scheduleDialog.timeLabel","Publish Time")}),e.jsx("input",{id:"publish-time",type:"time",value:u,onChange:g=>x(g.target.value),min:c?Qt(c):void 0,className:"w-full rounded-none border-0 border-b border-border bg-transparent py-2 text-base font-light text-foreground outline-none transition-all focus-visible:border-foreground focus-visible:ring-0 dark:scheme-dark"})]}),e.jsxs("div",{className:"flex gap-3 rounded-md border border-info-border bg-info-muted p-4",children:[e.jsx(Vt,{className:"h-5 w-5 shrink-0 text-info"}),e.jsx("p",{className:"text-sm text-info-foreground",children:o("templates.scheduleDialog.info","The version will be published automatically at the scheduled time. You can cancel anytime before then.")})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),disabled:n,className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground disabled:opacity-50",children:o("common.cancel","Cancel")}),e.jsx("button",{type:"button",onClick:f,disabled:!v||n,className:"rounded-none bg-foreground px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-background transition-colors hover:bg-foreground/90 disabled:opacity-50",children:n?o("common.scheduling","Scheduling..."):o("templates.scheduleDialog.confirm","Schedule")})]})]})},r.id):null}function es({tag:t,className:a}){const r=typeof t=="string"?t:t.name,s=typeof t=="object"?t.color:void 0;return e.jsxs("span",{className:k("inline-flex items-center gap-1 rounded-sm bg-muted px-1.5 py-0.5 font-mono text-xs text-muted-foreground",a),children:[s&&e.jsx("span",{className:"h-2 w-2 shrink-0 rounded-full",style:{backgroundColor:s}}),r]})}function ts({open:t,onOpenChange:a,validation:r,onOpenEditor:s}){const{t:n}=C();if(!r)return null;const o=r.errors&&r.errors.length>0,c=r.warnings&&r.warnings.length>0;return e.jsx(I,{open:t,onOpenChange:a,children:e.jsxs(E,{className:"max-w-lg",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border p-6",children:[e.jsxs("div",{children:[e.jsx(V,{className:"font-mono text-sm font-medium uppercase tracking-widest text-destructive",children:n("templates.validationDialog.title","Validation Errors")}),e.jsx(L,{className:"mt-1 text-sm font-light text-muted-foreground",children:n("templates.validationDialog.description","Cannot publish version due to content errors")})]}),e.jsxs(P,{className:"text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsxs("div",{className:"max-h-[400px] overflow-y-auto p-6",children:[o&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-destructive",children:[e.jsx(Ie,{size:16}),e.jsxs("span",{className:"font-mono text-xs font-medium uppercase tracking-widest",children:[n("templates.validationDialog.errors","Errors")," (",r.errors.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:r.errors.map((d,u)=>e.jsxs("div",{className:"border-l-2 border-destructive bg-destructive/5 py-2 pl-3 pr-2",children:[e.jsx("p",{className:"text-sm text-foreground",children:d.message}),e.jsx("p",{className:"mt-1 font-mono text-[10px] text-muted-foreground",children:d.path})]},u))})]}),c&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-warning",children:[e.jsx(O,{size:16}),e.jsxs("span",{className:"font-mono text-xs font-medium uppercase tracking-widest",children:[n("templates.validationDialog.warnings","Warnings")," (",r.warnings.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:r.warnings.map((d,u)=>e.jsxs("div",{className:"border-l-2 border-warning-border bg-warning-muted/50 py-2 pl-3 pr-2",children:[e.jsx("p",{className:"text-sm text-foreground",children:d.message}),e.jsx("p",{className:"mt-1 font-mono text-[10px] text-muted-foreground",children:d.path})]},u))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border p-6",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"rounded-none border border-border bg-background px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-muted-foreground transition-colors hover:border-foreground hover:text-foreground",children:n("common.close","Close")}),s&&e.jsx("button",{type:"button",onClick:()=>{a(!1),s()},className:"rounded-none bg-foreground px-6 py-2.5 font-mono text-xs uppercase tracking-wider text-background transition-colors hover:bg-foreground/90",children:n("templates.validationDialog.openEditor","Open in Editor")})]})]})})}const Se={DRAFT:{label:"Draft",badgeClass:"border-warning-border/50 bg-warning-muted text-warning-foreground",dotClass:"bg-warning"},SCHEDULED:{label:"Scheduled",badgeClass:"border-info-border/50 bg-info-muted text-info-foreground",dotClass:"bg-info"},PUBLISHED:{label:"Published",badgeClass:"border-success-border/50 bg-success-muted text-success-foreground",dotClass:"bg-success"},ARCHIVED:{label:"Archived",badgeClass:"border-muted-foreground/30 bg-muted text-muted-foreground",dotClass:"bg-muted-foreground"}};function ss({status:t}){const a=Se[t]||Se.DRAFT;return e.jsxs("span",{className:k("inline-flex items-center gap-1.5 border px-2 py-0.5 font-mono text-[10px] uppercase tracking-widest",a.badgeClass),children:[e.jsx("span",{className:k("h-1.5 w-1.5 rounded-full",a.dotClass)}),a.label]})}function se(t){return t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):null}function M({icon:t,label:a,onClick:r,variant:s="default"}){return e.jsxs(_,{children:[e.jsx(K,{asChild:!0,children:e.jsx("button",{onClick:n=>{n.stopPropagation(),r()},className:`flex h-9 w-9 items-center justify-center rounded-sm transition-colors ${s==="destructive"?"text-muted-foreground hover:bg-destructive/10 hover:text-destructive":"text-muted-foreground hover:bg-accent hover:text-foreground"}`,children:t})}),e.jsx(X,{side:"top",className:"font-mono text-xs",children:a})]})}function rs({version:t,onOpenEditor:a,onPublish:r,onSchedule:s,onCancelSchedule:n,onArchive:o,onDelete:c,onClone:d,isHighlighted:u=!1}){const{t:x}=C(),j=t.status==="DRAFT"||t.status==="SCHEDULED",f=t.status==="DRAFT",v=t.status==="SCHEDULED",g=t.status==="PUBLISHED",w=t.status==="DRAFT",m=!!d,h=j||f||v||g||w||m;return e.jsxs("div",{onClick:()=>a(t.id),className:k("group cursor-pointer border-b border-border px-4 py-4 transition-colors hover:bg-accent",u&&"animate-pulse-highlight"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center border border-border bg-background font-mono text-xs font-medium",children:["v",t.versionNumber]}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-foreground",children:t.name}),e.jsx(Ut,{size:14,className:"text-muted-foreground opacity-0 transition-opacity group-hover:opacity-100"})]}),t.description&&e.jsx("p",{className:"mt-0.5 text-sm text-muted-foreground line-clamp-1",children:t.description})]})]}),e.jsx(ss,{status:t.status})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between pl-11",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:12}),x("templates.versionInfo.createdAt","Created"),": ",se(t.createdAt)]}),t.scheduledPublishAt&&e.jsxs("span",{className:"flex items-center gap-1 text-info",children:[e.jsx(Pt,{size:12}),x("templates.versionInfo.scheduledAt","Scheduled"),":"," ",se(t.scheduledPublishAt)]}),t.publishedAt&&e.jsxs("span",{className:"flex items-center gap-1 text-success",children:[e.jsx(Lt,{size:12}),x("templates.versionInfo.publishedAt","Published"),": ",se(t.publishedAt)]}),t.archivedAt&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{size:12}),x("templates.versionInfo.archivedAt","Archived"),": ",se(t.archivedAt)]})]}),h&&e.jsxs("div",{className:"flex items-center gap-1",children:[m&&e.jsx(M,{icon:e.jsx(Ft,{size:18}),label:x("templates.versions.actions.clone","Clonar versión"),onClick:()=>d==null?void 0:d(t)}),j&&e.jsx(M,{icon:e.jsx(Ht,{size:18}),label:x("templates.versions.actions.publishNow","Publish Now"),onClick:()=>r==null?void 0:r(t)}),f&&e.jsx(M,{icon:e.jsx(Ee,{size:18}),label:x("templates.versions.actions.schedule","Schedule"),onClick:()=>s==null?void 0:s(t)}),v&&e.jsx(M,{icon:e.jsx(Ie,{size:18}),label:x("templates.versions.actions.cancelSchedule","Cancel Schedule"),onClick:()=>n==null?void 0:n(t)}),g&&e.jsx(M,{icon:e.jsx(ae,{size:18}),label:x("templates.versions.actions.archive","Archive"),onClick:()=>o==null?void 0:o(t)}),w&&e.jsx(M,{icon:e.jsx(Bt,{size:18}),label:x("templates.versions.actions.delete","Delete"),onClick:()=>c==null?void 0:c(t),variant:"destructive"})]})]})]})}function Te(t){return t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function ns(){var ye,we,De;const{templateId:t}=ct({from:"/workspace/$workspaceId/templates/$templateId"}),{fromFolderId:a}=ut({from:"/workspace/$workspaceId/templates/$templateId"}),{currentWorkspace:r}=de(),{t:s}=C(),{toast:n}=mt(),o=le(),[c,d]=l.useState(!1),[u,x]=l.useState(!1),[j,f]=l.useState(!1),[v,g]=l.useState(!1),[w,m]=l.useState(!1),[h,G]=l.useState(null),[F,Y]=l.useState(null),[Pe,ce]=l.useState(!1),[Le,Fe]=l.useState(null),[He,ue]=l.useState(!1),[Re,Ue]=l.useState(null),[Be,me]=l.useState(!1),[ze,Oe]=l.useState(null),[$e,xe]=l.useState(!1),[Me,We]=l.useState(null),[q,J]=l.useState({open:!1,conflict:null,pendingTypeId:null}),pe=Dt(),Q=kt(),ge=Ct(t),fe=St(t),_e=async i=>{await pe.mutateAsync({templateId:t,data:{title:i}})},Ke=async i=>{try{await Q.mutateAsync({templateId:t,data:{documentTypeId:i}})}catch(y){if(y instanceof gt){J({open:!0,conflict:y.conflict,pendingTypeId:i});return}throw y}},Xe=async()=>{if(q.pendingTypeId)try{await Q.mutateAsync({templateId:t,data:{documentTypeId:q.pendingTypeId,force:!0}}),J({open:!1,conflict:null,pendingTypeId:null})}catch(i){throw J({open:!1,conflict:null,pendingTypeId:null}),i}},Ge=()=>{J({open:!1,conflict:null,pendingTypeId:null})},{isTransitioning:Ye,direction:re,startTransition:qe,endTransition:he}=pt(),[be,je]=l.useState(re!=="forward"),[os,Je]=l.useState(!1);l.useEffect(()=>{if(re==="forward"){const i=setTimeout(()=>{je(!0),he()},50);return()=>clearTimeout(i)}},[re,he]);const{data:p,isLoading:Qe,error:Ze}=Tt(t),et=!!p,U=p==null?void 0:p.versions,N=l.useMemo(()=>U?U.reduce((i,y)=>(i[y.status]=(i[y.status]||0)+1,i),{PUBLISHED:0,SCHEDULED:0,DRAFT:0,ARCHIVED:0}):{PUBLISHED:0,SCHEDULED:0,DRAFT:0,ARCHIVED:0},[U]),[W,Z]=l.useState({PUBLISHED:!0,SCHEDULED:!0,DRAFT:!0,ARCHIVED:!0}),$=l.useMemo(()=>({PUBLISHED:W.PUBLISHED&&N.PUBLISHED>0,SCHEDULED:W.SCHEDULED&&N.SCHEDULED>0,DRAFT:W.DRAFT&&N.DRAFT>0,ARCHIVED:W.ARCHIVED&&N.ARCHIVED>0}),[W,N]),ne=l.useMemo(()=>{if(!U||U.length===0)return[];const i=U.filter(b=>$[b.status]),y=b=>b.updatedAt?new Date(b.updatedAt).getTime():new Date(b.createdAt).getTime(),S=[],T=[],D=[],B=[];for(const b of i)b.status==="PUBLISHED"?S.push(b):b.status==="SCHEDULED"?T.push(b):b.status==="DRAFT"?D.push(b):b.status==="ARCHIVED"&&B.push(b);return T.sort((b,z)=>{if(!b.scheduledPublishAt&&!z.scheduledPublishAt)return 0;if(!b.scheduledPublishAt)return 1;if(!z.scheduledPublishAt)return-1;const H=new Date(b.scheduledPublishAt).getTime(),R=new Date(z.scheduledPublishAt).getTime();return isNaN(H)||isNaN(R)?0:H-R}),D.sort((b,z)=>{const H=y(b),R=y(z);return isNaN(H)||isNaN(R)?0:R-H}),B.sort((b,z)=>{const H=y(b),R=y(z);return isNaN(H)||isNaN(R)?0:R-H}),[...S,...T,...D,...B]},[U,$]),ve=()=>{r&&!Ye&&(qe("backward"),Je(!0),je(!1),setTimeout(()=>{o(a?{to:"/workspace/$workspaceId/documents",params:{workspaceId:r.id},search:a==="root"?void 0:{folderId:a}}:{to:"/workspace/$workspaceId/templates",params:{workspaceId:r.id}})},300))},Ne=i=>{r&&o({to:"/workspace/$workspaceId/editor/$templateId/version/$versionId",params:{workspaceId:r.id,templateId:t,versionId:i}})},tt=()=>{!r||!(p!=null&&p.folderId)||o({to:"/workspace/$workspaceId/documents",params:{workspaceId:r.id},search:{folderId:p.folderId}})},st=i=>{Y(i),f(!0)},rt=i=>{Y(i),g(!0)},nt=async()=>{var i,y;if(F)try{await ge.mutateAsync(F.id),f(!1),Y(null)}catch(S){if(oe.isAxiosError(S)&&((i=S.response)==null?void 0:i.status)===422){const T=(y=S.response.data)==null?void 0:y.validation;if(T){G(T),f(!1),m(!0);return}}throw S}},ot=async i=>{var y,S,T;if(F)try{await fe.mutateAsync({versionId:F.id,publishAt:i}),g(!1),Y(null)}catch(D){if(oe.isAxiosError(D)&&((y=D.response)==null?void 0:y.status)===409&&D.response.data.error==="another version is already scheduled at this time"){n({variant:"destructive",title:s("templates.scheduleDialog.error.conflictTitle","Scheduling Conflict"),description:s("templates.scheduleDialog.error.conflictDescription","Another version is already scheduled at this time.")});return}if(oe.isAxiosError(D)&&((S=D.response)==null?void 0:S.status)===422){const B=(T=D.response.data)==null?void 0:T.validation;if(B){G(B),g(!1),m(!0);return}}throw D}},at=i=>{Oe(i),me(!0)},it=i=>{Ue(i),ue(!0)},lt=i=>{Fe(i),ce(!0)},dt=i=>{We(i),xe(!0)};return Qe&&!et?e.jsxs(ee.div,{className:"flex h-full flex-1 flex-col bg-background",initial:{opacity:0},animate:{opacity:be?1:0},transition:{duration:.25,ease:"easeOut"},children:[e.jsxs("header",{className:"shrink-0 px-4 pb-6 pt-12 md:px-6 lg:px-6",children:[e.jsx(te,{className:"h-4 w-32"}),e.jsx(te,{className:"mt-4 h-10 w-64"})]}),e.jsx("div",{className:"flex-1 px-4 pb-12 md:px-6 lg:px-6",children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1fr_1.5fr]",children:[e.jsx(te,{className:"h-64"}),e.jsx(te,{className:"h-96"})]})})]}):Ze||!p?e.jsxs("div",{className:"flex h-full flex-1 flex-col items-center justify-center bg-background",children:[e.jsx("p",{className:"text-lg text-muted-foreground",children:s("templates.detail.notFound","Template not found")}),e.jsx("button",{onClick:ve,className:"mt-4 text-sm text-foreground underline underline-offset-4 hover:no-underline",children:a?s("templates.detail.backToFolder","Back to Folder"):s("templates.detail.backToList","Back to Templates")})]}):e.jsxs(ee.div,{className:"flex h-full flex-1 flex-col bg-background",initial:{opacity:0},animate:{opacity:be?1:0},transition:{duration:.25,ease:"easeOut"},children:[e.jsx("div",{className:"sticky top-0 z-40 h-0",children:e.jsx(xt,{initial:!1,children:((ye=p.versions)==null?void 0:ye.some(i=>i.status==="PUBLISHED"))&&!p.documentTypeId&&e.jsx(ee.div,{initial:{y:-40,opacity:0},animate:{y:0,opacity:1},exit:{y:-40,opacity:0},transition:{duration:.25,ease:"easeInOut"},children:e.jsxs("div",{className:"flex items-center gap-2 border-b border-warning/30 bg-warning-muted/60 px-6 py-2 dark:bg-warning-muted/50",children:[e.jsx(O,{className:"h-4 w-4 shrink-0 text-warning dark:text-warning-border"}),e.jsx("span",{className:"text-sm text-warning-foreground",children:s("templates.warnings.noDocumentTypeDescription","This template has a published version but no document type. It won't be found via the internal render API.")})]})},"no-type-warning")})}),e.jsxs("header",{className:"shrink-0 px-4 pb-6 pt-12 md:px-6 lg:px-6",children:[e.jsxs("button",{onClick:ve,className:"mb-4 flex items-center gap-2 font-mono text-[10px] uppercase tracking-widest text-muted-foreground transition-colors hover:text-foreground",children:[e.jsx(Ot,{size:14}),a?s("templates.detail.backToFolder","Back to Folder"):s("templates.detail.backToList","Back to Templates")]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"mb-1 font-mono text-[10px] uppercase tracking-widest text-muted-foreground",children:s("templates.detail.header","Template Details")}),e.jsx(Yt,{value:p.title,onSave:_e,isLoading:pe.isPending,className:"font-display text-3xl font-light leading-tight tracking-tight text-foreground md:text-4xl"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"group flex h-12 items-center gap-2 rounded-none bg-foreground px-6 text-sm font-medium tracking-wide text-background shadow-lg shadow-muted transition-colors hover:bg-foreground/90",children:[e.jsx(Et,{size:20}),e.jsx("span",{children:s("templates.detail.createVersion","Create New Version")})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-12 md:px-6 lg:px-6",children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1fr_1.5fr]",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-border bg-background p-6",children:[e.jsx("h2",{className:"mb-4 font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:s("templates.detail.information","Information")}),e.jsxs("dl",{className:"space-y-4",children:[p.folder&&e.jsxs("div",{children:[e.jsxs("dt",{className:"mb-1 flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx($t,{size:12}),s("templates.detail.folder","Folder")]}),e.jsx("dd",{children:e.jsx("button",{onClick:tt,className:"text-sm text-foreground underline-offset-2 hover:underline",children:p.folder.name})})]}),e.jsxs("div",{children:[e.jsxs("dt",{className:"mb-1 flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(Ee,{size:12}),s("templates.detail.createdAt","Created")]}),e.jsx("dd",{className:"text-sm text-foreground",children:Te(p.createdAt)})]}),e.jsxs("div",{children:[e.jsxs("dt",{className:"mb-1 flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(ie,{size:12}),s("templates.detail.updatedAt","Last Updated")]}),e.jsx("dd",{className:"text-sm text-foreground",children:Te(p.updatedAt)})]}),e.jsxs("div",{children:[e.jsxs("dt",{className:"mb-1 flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(Mt,{size:12}),s("templates.detail.versionsCount","Versions")]}),e.jsx("dd",{className:"text-sm text-foreground",children:((we=p.versions)==null?void 0:we.length)??0})]}),e.jsxs("div",{children:[e.jsxs("dt",{className:"mb-1 flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(zt,{size:12,className:"shrink-0"}),e.jsx("span",{className:"shrink-0",children:s("templates.detail.documentType","Document Type")}),e.jsxs(ee.span,{animate:(De=p.versions)!=null&&De.some(i=>i.status==="PUBLISHED")&&!p.documentTypeId?{opacity:1,x:0,width:"auto",marginLeft:4}:{opacity:0,x:-20,width:0,marginLeft:0},transition:{duration:.2,ease:"easeInOut"},className:"inline-flex shrink-0 items-center gap-1 overflow-hidden border border-warning/50 bg-warning-muted/60 px-1.5 py-0.5 text-warning-foreground dark:border-warning-border dark:bg-warning-muted/50",children:[e.jsx(O,{size:10,className:"shrink-0"}),e.jsx("span",{className:"whitespace-nowrap font-mono text-[9px] uppercase tracking-widest",children:s("templates.warnings.noDocumentType","No type assigned")})]})]}),e.jsx("dd",{children:e.jsx(At,{currentTypeId:p.documentTypeId,currentTypeName:p.documentTypeName,onAssign:Ke,disabled:Q.isPending})})]})]})]}),e.jsxs("div",{className:"border border-border bg-background p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:s("templates.detail.tags","Tags")}),e.jsx("button",{onClick:()=>x(!0),className:"text-muted-foreground transition-colors hover:text-foreground",title:s("templates.detail.editTags","Edit tags"),children:e.jsx(Ae,{size:14})})]}),p.tags&&p.tags.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:p.tags.map(i=>e.jsx(es,{tag:i},i.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:s("templates.detail.noTags","No tags")})]})]}),e.jsxs("div",{className:"border border-border bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border p-4",children:[e.jsx("h2",{className:"font-mono text-[10px] font-medium uppercase tracking-widest text-muted-foreground",children:s("templates.detail.versionsSection","Version History")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs(_,{children:[e.jsx(K,{asChild:!0,children:e.jsxs("button",{onClick:()=>Z(i=>({...i,PUBLISHED:!i.PUBLISHED})),disabled:N.PUBLISHED===0,className:k("flex items-center gap-1.5 rounded-sm border px-1.5 py-1 transition-colors",N.PUBLISHED===0?"cursor-not-allowed border-border bg-background text-muted-foreground opacity-30":$.PUBLISHED?"border-success-border/50 bg-success-muted text-success":"border-border bg-background text-muted-foreground opacity-50 hover:opacity-75"),children:[e.jsx(Rt,{size:14}),e.jsx("span",{className:"font-mono text-[10px]",children:N.PUBLISHED})]})}),e.jsx(X,{side:"bottom",className:"font-mono text-xs",children:s("templates.detail.filters.published","Publicadas")})]}),e.jsxs(_,{children:[e.jsx(K,{asChild:!0,children:e.jsxs("button",{onClick:()=>Z(i=>({...i,SCHEDULED:!i.SCHEDULED})),disabled:N.SCHEDULED===0,className:k("flex items-center gap-1.5 rounded-sm border px-1.5 py-1 transition-colors",N.SCHEDULED===0?"cursor-not-allowed border-border bg-background text-muted-foreground opacity-30":$.SCHEDULED?"border-info-border/50 bg-info-muted text-info":"border-border bg-background text-muted-foreground opacity-50 hover:opacity-75"),children:[e.jsx(ie,{size:14}),e.jsx("span",{className:"font-mono text-[10px]",children:N.SCHEDULED})]})}),e.jsx(X,{side:"bottom",className:"font-mono text-xs",children:s("templates.detail.filters.scheduled","Agendadas")})]}),e.jsxs(_,{children:[e.jsx(K,{asChild:!0,children:e.jsxs("button",{onClick:()=>Z(i=>({...i,DRAFT:!i.DRAFT})),disabled:N.DRAFT===0,className:k("flex items-center gap-1.5 rounded-sm border px-1.5 py-1 transition-colors",N.DRAFT===0?"cursor-not-allowed border-border bg-background text-muted-foreground opacity-30":$.DRAFT?"border-warning-border/50 bg-warning-muted text-warning-foreground":"border-border bg-background text-muted-foreground opacity-50 hover:opacity-75"),children:[e.jsx(Ce,{size:14}),e.jsx("span",{className:"font-mono text-[10px]",children:N.DRAFT})]})}),e.jsx(X,{side:"bottom",className:"font-mono text-xs",children:s("templates.detail.filters.draft","Borradores")})]}),e.jsxs(_,{children:[e.jsx(K,{asChild:!0,children:e.jsxs("button",{onClick:()=>Z(i=>({...i,ARCHIVED:!i.ARCHIVED})),disabled:N.ARCHIVED===0,className:k("flex items-center gap-1.5 rounded-sm border px-1.5 py-1 transition-colors",N.ARCHIVED===0?"cursor-not-allowed border-border bg-background text-muted-foreground opacity-30":$.ARCHIVED?"border-muted-foreground/30 bg-muted text-muted-foreground":"border-border bg-background text-muted-foreground opacity-50 hover:opacity-75"),children:[e.jsx(ae,{size:14}),e.jsx("span",{className:"font-mono text-[10px]",children:N.ARCHIVED})]})}),e.jsx(X,{side:"bottom",className:"font-mono text-xs",children:s("templates.detail.filters.archived","Archivadas")})]})]}),e.jsx("span",{className:"font-mono text-[10px] text-muted-foreground",children:s("templates.detail.versionsTotal","{{count}} version(s)",{count:ne.length})})]})]}),ne.length>0?e.jsx("div",{className:"divide-y divide-border",children:ne.map(i=>e.jsx(rs,{version:i,onOpenEditor:Ne,onPublish:st,onSchedule:rt,onCancelSchedule:at,onArchive:it,onDelete:lt,onClone:dt},i.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ce,{size:32,className:"mb-3 text-muted-foreground/50"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("templates.detail.noVersions","No versions yet")}),e.jsx("button",{onClick:()=>d(!0),className:"mt-4 text-sm text-foreground underline underline-offset-4 hover:no-underline",children:s("templates.detail.createFirstVersion","Create first version")})]})]})]})}),e.jsx(Xt,{open:c,onOpenChange:d,templateId:t}),e.jsx(qt,{open:u,onOpenChange:x,templateId:t,currentTags:p.tags??[]}),e.jsx(Jt,{open:j,onOpenChange:f,version:F,onConfirm:nt,isLoading:ge.isPending}),e.jsx(Zt,{open:v,onOpenChange:g,version:F,onConfirm:ot,isLoading:fe.isPending}),e.jsx(ts,{open:w,onOpenChange:m,validation:h,onOpenEditor:F?()=>Ne(F.id):void 0}),e.jsx(Gt,{open:Pe,onOpenChange:ce,version:Le,templateId:t}),e.jsx(Wt,{open:He,onOpenChange:ue,version:Re,templateId:t}),e.jsx(_t,{open:Be,onOpenChange:me,version:ze,templateId:t}),e.jsx(Kt,{open:$e,onOpenChange:xe,templateId:t,sourceVersion:Me}),e.jsx(It,{open:q.open,conflictTemplate:q.conflict,onCancel:Ge,onForce:Xe,isLoading:Q.isPending})]})}const Cs=ns;export{Cs as component};
